<?xml version='1.0' encoding='windows-1252'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
    <Product
        Id='*'
        Name='Bitbucket CLI'
        UpgradeCode='12345678-1234-1234-1234-123456789012'
        Manufacturer='Pegasus Heavy Industries'
        Language='1033'
        Codepage='1252'
        Version='0.2.0'>

        <Package
            Id='*'
            Keywords='Installer'
            Description='Bitbucket CLI Installer'
            Manufacturer='Pegasus Heavy Industries'
            InstallerVersion='450'
            Languages='1033'
            Compressed='yes'
            InstallScope='perMachine'
            SummaryCodepage='1252' />

        <MajorUpgrade
            Schedule='afterInstallInitialize'
            DowngradeErrorMessage='A newer version of Bitbucket CLI is already installed. Setup will now exit.' />

        <Media Id='1' Cabinet='media1.cab' EmbedCab='yes' DiskPrompt='CD-ROM #1' />
        <Property Id='DiskPrompt' Value='Bitbucket CLI Installation' />

        <Directory Id='TARGETDIR' Name='SourceDir'>
            <Directory Id='ProgramFiles64Folder' Name='PFiles'>
                <Directory Id='APPLICATIONFOLDER' Name='BitbucketCLI'>
                    <Component Id='MainExecutable' Guid='*' Win64='yes'>
                        <File
                            Id='bitbucketEXE'
                            Name='bitbucket.exe'
                            DiskId='1'
                            Source='target\release\bitbucket.exe'
                            KeyPath='yes' />
                        <Environment
                            Id='PATH'
                            Name='PATH'
                            Value='[APPLICATIONFOLDER]'
                            Permanent='no'
                            Part='last'
                            Action='set'
                            System='yes' />
                    </Component>
                    <Component Id='License' Guid='*' Win64='yes'>
                        <File
                            Id='LicenseFile'
                            Name='LICENSE.txt'
                            DiskId='1'
                            Source='LICENSE'
                            KeyPath='yes' />
                    </Component>
                    <Component Id='Readme' Guid='*' Win64='yes'>
                        <File
                            Id='ReadmeFile'
                            Name='README.md'
                            DiskId='1'
                            Source='README.md'
                            KeyPath='yes' />
                    </Component>
                </Directory>
            </Directory>
        </Directory>

        <Feature
            Id='Complete'
            Title='Bitbucket CLI'
            Description='The complete Bitbucket CLI package.'
            Level='1'
            ConfigurableDirectory='APPLICATIONFOLDER'>
            <ComponentRef Id='MainExecutable' />
            <ComponentRef Id='License' />
            <ComponentRef Id='Readme' />
        </Feature>

        <Icon Id='ProductICO' SourceFile='packaging\windows\icon.ico' />
        <Property Id='ARPPRODUCTICON' Value='ProductICO' />
        <Property Id='ARPHELPLINK' Value='https://github.com/pegasusheavy/bitbucket-cli' />
        <UI>
            <UIRef Id='WixUI_InstallDir' />
            <Publish Dialog='ExitDialog'
                Control='Finish'
                Event='DoAction'
                Value='LaunchApplication'>WIXUI_EXITDIALOGOPTIONALCHECKBOX = 1 and NOT Installed</Publish>
        </UI>
    </Product>
</Wix>
